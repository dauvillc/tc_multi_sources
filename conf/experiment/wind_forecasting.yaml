# @package _global_
defaults:
  - override /paths: jz
  - override /dataloader: jz
  - override /sources: all_sources
  - override /lightning_module: deterministic
  - override /lr_scheduler: cosine_warmup_100epochs
  - override /metrics: default_fm

wandb:
  name: wind_forecasting
  group: wind_forecasting

dataset:
  train:
    dt_max: 24
    min_available_sources: 1
    # Parameter to randomly drop the IR and ERA5 sources. Since those are almost
    # always present, we drop them half the time so that the model can still learn
    # not to rely on those.
    randomly_drop_sources:
      tc_primed_era5: 0.5  # source: proba
      tc_primed_infrared: 0.5 
      tc_primed_pmw*: 0.5
    # Parameters to perform a forecasting task specifically.
    # Those are automatically propagated to the val and test datasets.
    forecasting_lead_time: 24
    forecasting_sources: tc_primed_storm_metadata
    # Parameter to mask the spatial coordinates of the forecast source
    # (Since we don't know the future location of the storm)
    mask_spatial_coords: ['tc_primed_storm_metadata']
  val:
    select_most_recent: true
  test:
    select_most_recent: true
  
lightning_module:
  mask_only_sources: tc_primed_storm_metadata

trainer:
  strategy: ddp_find_unused_parameters_true